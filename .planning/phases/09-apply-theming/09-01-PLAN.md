---
phase: 09-apply-theming
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - kflash/theme.py
autonomous: true

must_haves:
  truths:
    - "Phase messages use blue color (distinct from cyan info)"
    - "NEW device marker uses yellow (caution/attention)"
    - "BLK device marker uses yellow (caution/unavailable)"
    - "Menu border uses cyan (matches title styling)"
  artifacts:
    - path: "kflash/theme.py"
      provides: "Reconciled theme colors matching CONTEXT.md decisions"
      contains: "_BLUE"
  key_links:
    - from: "kflash/theme.py"
      to: "09-CONTEXT.md"
      via: "Color decisions"
      pattern: "phase.*BLUE|marker_new.*YELLOW|marker_blk.*YELLOW|menu_border.*CYAN"
---

<objective>
Reconcile theme.py colors with Phase 9 CONTEXT.md decisions.

Purpose: CONTEXT.md specifies color preferences that differ from the initial theme.py implementation. These changes ensure the visual styling matches user expectations before applying theming to output/TUI/errors.

Output: Updated theme.py with blue phase color, yellow NEW/BLK markers, and cyan menu border.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-apply-theming/09-CONTEXT.md
@.planning/phases/09-apply-theming/09-RESEARCH.md
@kflash/theme.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update theme.py color definitions</name>
  <files>kflash/theme.py</files>
  <action>
Update the Theme dataclass and color constants in theme.py to match CONTEXT.md decisions:

1. Add blue color constant after existing colors:
   ```python
   _BLUE = "\033[94m"    # Bright blue
   ```

2. Update Theme dataclass fields:
   - Change `phase: str = _CYAN` to `phase: str = _BLUE` (distinct from info)
   - Change `marker_new: str = _CYAN` to `marker_new: str = _YELLOW` (caution/attention)
   - Change `marker_blk: str = _RED` to `marker_blk: str = _YELLOW` (caution/unavailable)
   - Change `menu_border: str = ""` to `menu_border: str = _CYAN` (match title color)

3. Update _no_color_theme to match (already has empty strings, no change needed)

Rationale from CONTEXT.md:
- Phase bracket blue: Distinct from cyan info brackets
- Marker NEW yellow: Needs attention (caution color)
- Marker BLK yellow: Unavailable/blocked (caution color)
- Menu border cyan: Match title styling for visual consistency
  </action>
  <verify>
Run Python syntax check:
```bash
python -m py_compile kflash/theme.py
```

Verify _BLUE constant is defined:
```bash
grep '_BLUE' kflash/theme.py
```

Verify theme fields use correct colors:
```bash
python -c "from kflash.theme import get_theme; t = get_theme(); print(f'phase: {repr(t.phase)}')"
```
  </verify>
  <done>
- _BLUE constant defined as "\033[94m"
- theme.phase uses _BLUE
- theme.marker_new uses _YELLOW
- theme.marker_blk uses _YELLOW
- theme.menu_border uses _CYAN
- Module imports without errors
  </done>
</task>

</tasks>

<verification>
1. `python -m py_compile kflash/theme.py` exits 0
2. `grep '_BLUE' kflash/theme.py` shows constant definition
3. `python -c "from kflash.theme import get_theme; t = get_theme(); print(t.phase, t.marker_new, t.marker_blk, t.menu_border)"` shows non-empty ANSI codes (in color-capable terminal)
</verification>

<success_criteria>
- theme.py compiles without errors
- _BLUE constant exists and is used by phase field
- Phase color is blue (\033[94m), distinct from cyan info
- NEW and BLK markers are yellow for consistent "caution" meaning
- Menu border is cyan for visual consistency with title
- NO_COLOR mode still returns empty strings (unchanged behavior)
</success_criteria>

<output>
After completion, create `.planning/phases/09-apply-theming/09-01-SUMMARY.md`
</output>
