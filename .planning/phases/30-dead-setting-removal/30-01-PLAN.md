---
phase: 30-dead-setting-removal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - kflash/models.py
  - kflash/registry.py
  - kflash/screen.py
autonomous: true

must_haves:
  truths:
    - "GlobalConfig dataclass has no config_cache_dir field"
    - "Registry serialization neither reads nor writes config_cache_dir"
    - "Settings screen does not list config_cache_dir as an editable option"
    - "get_config_dir() still works using XDG convention unchanged"
  artifacts:
    - path: "kflash/models.py"
      provides: "GlobalConfig without config_cache_dir"
      not_contains: "config_cache_dir"
    - path: "kflash/registry.py"
      provides: "Registry load/save without config_cache_dir"
      not_contains: "config_cache_dir"
    - path: "kflash/screen.py"
      provides: "Settings screen without config_cache_dir option"
      not_contains: "config_cache_dir"
  key_links: []
---

# Plan 30-01: Remove config_cache_dir from codebase

## Goal
Delete the unused `config_cache_dir` setting from all source files. No behavioral changes.

## Tasks

<task id="1">
Remove config_cache_dir field from GlobalConfig in models.py

Delete the line:
```python
config_cache_dir: str = "~/.config/kalico-flash/configs"
```
from the GlobalConfig dataclass.
</task>

<task id="2">
Remove config_cache_dir from registry serialization in registry.py

In `load_registry()`, delete the `config_cache_dir=global_raw.get(...)` argument from the GlobalConfig constructor call.

In `save_registry()`, delete the `"config_cache_dir": registry.global_config.config_cache_dir` line from the global dict literal.
</task>

<task id="3">
Remove config_cache_dir entry from settings screen in screen.py

Delete the dict entry:
```python
{"key": "config_cache_dir", "label": "Config cache directory", "type": "path"},
```
from the GLOBAL_SETTINGS list.
</task>

## Verification

1. `grep -r config_cache_dir kflash/` returns zero matches
2. `python -c "from kflash.models import GlobalConfig; GlobalConfig()"` succeeds
3. `python -c "from kflash.registry import load_registry"` succeeds (import check)
