---
milestone: v4.0
audited: 2026-02-01
status: tech_debt
scores:
  requirements: 14/14
  phases: 4/4
  integration: 5/5
  flows: 3/3
gaps:
  requirements: []
  integration: []
  flows: []
tech_debt:
  - phase: 25-key-internalization-in-tui
    items:
      - "models.py:27 obsolete comment says 'user-chosen, used as --device flag' — should say 'auto-generated slug from display name'"
---

# v4.0 Milestone Audit — Remove CLI & Internalize Device Keys

**Audited:** 2026-02-01
**Status:** Tech Debt (no blockers, 1 minor item)

## Requirements Coverage

| Requirement | Phase | Status |
|-------------|-------|--------|
| CLI-01: kflash launches directly into TUI | 26 | ✓ Satisfied |
| CLI-02: Old flags — no traceback | 26 | ✓ Satisfied (flags ignored, TUI launches) |
| CLI-03: All argparse removed | 26 | ✓ Satisfied |
| CLI-04: CLI-only late imports removed | 26 | ✓ Satisfied |
| KEY-01: Auto-generated slug from name | 24 | ✓ Satisfied |
| KEY-02: Collision handling with suffix | 24 | ✓ Satisfied |
| KEY-03: No key prompt in add-device | 25 | ✓ Satisfied |
| KEY-04: No key edit in config screen | 25 | ✓ Satisfied |
| KEY-05: User output shows name not key | 25 | ✓ Satisfied |
| KEY-06: Existing keys preserved | 25 | ✓ Satisfied |
| DOC-01: README TUI-only | 27 | ✓ Satisfied |
| DOC-02: CLAUDE.md TUI-only | 27 | ✓ Satisfied |
| DOC-03: Error messages reference TUI | 27 | ✓ Satisfied |
| DOC-04: install.sh updated | 27 | ✓ Satisfied |

**Score: 14/14 requirements satisfied**

## Phase Verification Summary

| Phase | Status | Score |
|-------|--------|-------|
| 24: Slug Generation | Passed | 5/5 |
| 25: Key Internalization | Passed | 4/4 |
| 26: Remove CLI | Passed | 6/6 |
| 27: Documentation & Cleanup | Passed | 11/11 |

**Score: 4/4 phases passed**

## Cross-Phase Integration

| Connection | Status |
|------------|--------|
| Phase 24→25: generate_device_key() wired into add-device wizard | ✓ Connected |
| Phase 25→26: from_tui/from_menu params fully removed | ✓ Clean |
| Phase 26→27: Error messages match TUI flow | ✓ Consistent |
| All internal APIs have consumers | ✓ No orphans |
| TTY/print safety checks intact | ✓ Protected |

**Score: 5/5 connections verified**

## E2E Flows

| Flow | Status |
|------|--------|
| Add device: name → slug → register → display in TUI | ✓ Complete |
| Flash device: select by name → flash → results show name | ✓ Complete |
| Launch: kflash → TTY check → TUI menu (no arg parsing) | ✓ Complete |

**Score: 3/3 flows verified**

## Tech Debt

### 1 item across 1 phase

**Phase 25: Key Internalization**
- `models.py:27`: Comment says `"user-chosen, used as --device flag"` — should say `"auto-generated slug from display name"`

---

*Audited: 2026-02-01*
