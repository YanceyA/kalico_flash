# Milestone v3.3: Config Device

**Status:** ✅ SHIPPED 2026-01-31
**Phases:** 18-20
**Total Plans:** 4

## Overview

Add "Config device" action to edit registered device properties from the TUI — device key, display name, flash method, include/exclude status, and menuconfig launch.

## Phases

### Phase 18: Foundation & Screen
**Goal**: Backend persistence layer and config screen rendering for device editing
**Depends on**: Phase 17
**Plans**: 2 plans

Plans:
- [x] 18-01: Registry update_device method, key validation, config cache rename helper
- [x] 18-02: Device config screen rendering (DEVICE_SETTINGS, render function, two-panel layout)

**Details:**
- Registry.update_device() with atomic load-modify-save
- validate_device_key() for empty, format, uniqueness checks
- rename_device_config_cache() with shutil.move
- DEVICE_SETTINGS list with 5 entries (name, key, flash_method, flashable, menuconfig)
- render_device_config_screen() with identity panel + settings panel

### Phase 19: Edit Interaction
**Goal**: Users can edit all device properties through the config screen with safe key rename
**Depends on**: Phase 18
**Plans**: 1 plan

Plans:
- [x] 19-01: Device config screen interaction loop with collect-then-save editing

**Details:**
- _device_config_screen() with render-read-dispatch loop
- 5 edit types: text, validated text, cycle, toggle, menuconfig action
- Collect-then-save pattern — all edits saved atomically on screen exit
- Key rename: validate → move config cache dir → atomic registry save
- Esc/B saves, Ctrl+C discards

### Phase 20: Menu Integration
**Goal**: Users can access device config from the main menu
**Depends on**: Phase 19
**Plans**: 1 plan

Plans:
- [x] 20-01: Wire E key handler, device selection prompt, and step dividers into main menu

**Details:**
- E key added to ACTIONS list at position 4
- Device selection reuses _prompt_device_number
- Step dividers frame the config device flow
- Countdown return timer after config screen exits

---

## Milestone Summary

**Decimal Phases:** None

**Key Decisions:**
- Collect-then-save pattern for edits (not save-per-field) — matches research recommendation
- Key rename: validate → move dir → atomic save ordering — prevents partial state corruption
- No new modules — composition into existing tui.py, screen.py, registry.py, config.py, validation.py

**Issues Resolved:**
- ConfigManager constructor arg order corrected during Phase 19 execution
- Menuconfig launch approach adjusted to use standalone build.run_menuconfig()

**Issues Deferred:** None

**Technical Debt Incurred:** None

---

_For current project status, see .planning/ROADMAP.md_
