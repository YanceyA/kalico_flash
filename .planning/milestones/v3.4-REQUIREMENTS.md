# Requirements Archive: v3.4 Check Katapult

**Archived:** 2026-01-31
**Status:** ✅ SHIPPED (feature parked after testing)

This is the archived requirements specification for v3.4.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v3.4 Requirements (from ROADMAP success criteria)

### Research Requirements
- [x] **RES-01**: sysfs path resolution documented with working code
- [x] **RES-02**: Serial substring matching verified across Klipper/Katapult modes
- [x] **RES-03**: Timing measurements recorded for bootloader entry, sysfs reset, re-enumeration
- [x] **RES-04**: flashtool.py -r behavior documented for all scenarios
- [x] **RES-05**: Beacon probe exclusion confirmed

### Detection Requirements
- [x] **DET-01**: check_katapult() tri-state return (True/False/None)
- [x] **DET-02**: flashtool.py -r bootloader entry
- [x] **DET-03**: katapult_ device polling
- [x] **DET-04**: USB sysfs reset recovery
- [x] **DET-05**: KatapultCheckResult dataclass

### Helper Requirements
- [x] **HELP-01**: _resolve_usb_sysfs_path helper
- [x] **HELP-02**: _usb_sysfs_reset helper
- [x] **HELP-03**: _poll_for_serial_device helper

### TUI Requirements
- [x] **TUI-01**: Key triggers Katapult check from device config screen
- [x] **TUI-02**: Warning about bootloader mode before check
- [x] **TUI-03**: Confirmation defaults to No
- [x] **TUI-04**: Tri-state result display
- [x] **TUI-05**: Service lifecycle guaranteed (stop before, restart after)

---

## Milestone Summary

**Shipped:** 18 of 18 requirements (all implemented and verified)
**Adjusted:** Feature parked after live testing — UI trigger removed, code retained
**Dropped:** None — all requirements were implemented, but feature was subsequently disabled

---
*Archived: 2026-01-31 as part of v3.4 milestone completion*
